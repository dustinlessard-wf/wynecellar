define(["jquery","underscore","backbone","stackmobinit","models/WineModel","text!templates/wine/wineDetailTemplate.html"],function(e,t,n,r,i,s){var o=n.View.extend({events:{"click #save-wine":"save","submit form":"save"},initialize:function(){this.template=t.template(s),this.router=this.options.router,this.model=new i},save:function(t){t.preventDefault();var n=this,r=new i({winery:this.$("#wine-winery").val(),type:e("#wine-type").val(),size:e("#wine-size").val()});return r.create({success:function(e,t,i){n.collection.add(r),n.$("#wine-winery").val(""),n.$("#wine-type").val(""),n.$("#wine-size").val(""),n.router.navigate("home",!0)},error:function(e,t,n){console.log(t)}}),this},render:function(){return this.$el.empty(),this.$el.append(this.template(this.model.toJSON())),this}});return o});