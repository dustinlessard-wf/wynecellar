define(["jquery","stackmobinit","libs/app/util","views/wine/MainView","views/wine/DetailView","views/wine/AddView","collections/wine/WineCollection"],function(e,t,n,r,i,s,o){var u=Backbone.Router.extend({routes:{"":"wine","wine/:reload":"wine","winedetail/:id":"winedetail",wineadd:"wineadd"},initialize:function(t){this.collection=t.collection,e(".back").live("click",function(e){return window.history.back(),!1}),this.firstPage=!0},wine:function(e){this.changePage(new r({collection:this.collection}),"wine",null,e)},winedetail:function(e){model=this.collection.get(e),this.changePage(new i({collection:this.collection,model:model}),"winedetail","slide",!0)},wineadd:function(e){this.changePage(new s({collection:this.collection,router:this}),"wineadd")},changePage:function(t,n,r,i){if(r==="undefined")var r=e.mobile.defaultPageTransition;this.firstPage&&(r="none",this.firstPage=!1);var s=e("."+n);i&&(s.remove(),s.html("")),s.html()||(t.render(),e("body").append(e(t.el)),s=t.el),e.mobile.changePage(e(s),{changeHash:!1,transition:r,reverse:!1})}}),a=function(){var e=new o;e.fetch({async:!1});var t=new u({collection:e});Backbone.history.start()};return{initialize:a}});